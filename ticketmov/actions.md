1. учитывать пути внутри кода
2. валидация данныз только внутри controller и внутри html Тегов
3. вся бизнес-логика только внутри controller
4. указывай все пути из корня

## Таблицы

#### Фильм
1. Название фильма
2. Описание фильма
3. Изображение
3. Длительность фильма
4. Время показа
5. Колво рядов
6. Колво мест

#### Место
1. Номер ряда
2. Номер места
3. Фильм
4. Пользователь

---

## Главный экран
- Путь к front (из корня): index/index.php
- Путь к controller (из корня): index/index_controller.php

#### front
- Хэдер (Личный кабинет, Выйти)
- Описание кинотеатра
- Фильмы в виде карусели
    1. Весь фильм расположен в карточке
    2. Сверху изображение fill (50х80), под изображением информация (название, длительность, время показа)
    3. Название кликабельное и переводит на подробную страницу фильма (?movie_id=)
- Кнопка добавление нового фильма (видно только если пользователь админ)
- Заголовочный текст "Наши кинотеатры"
- Три метки в санкт-петербурге на яндекс карте, показывающие местоположение кинотеатров, область просмотра ограничена

#### backend
1. Интервальное (5 сек) обновление фильмов (сортировка по времени показа + не показывать прошедшие фильмы) AJAX

#### db
1. getActiveMovies () возращает все данные фильмов отсортированных по возрастанию даты показа + отсеивает фильмы у которых дата показа меньше чем время сервера
2. функция isAdmin() уже имеется

---

## Добавление новых фильмов
- Путь к front: admin/create_movie.php
- Путь к controller: admin/create_movie_controller.php

#### front
- Все обернуто в контейнер
- Поля для ввода:
    1. Название фильма (обязательно, не пустое)
    2. Описание фильма (обязательно, не пустое)
    3. Загрузка изображения в папку images (обязательно)
    4. Длительность фильма (число, обязательно, больше > 0)
    5. Время показа (обязательно, выбор даты, дата больше чем время сервера)
- Кнопка для добавления фильма

#### backend (каждый из этих пунктов это отдельные ошибки)
1. Проверка на пустые поля
2. Проверка на загруженность изображения
3. Валидация длительности
4. валидация время показа
5. Создание нового фильма и перевод на главную страницу (index/index.php)

#### db
1. createMovie() создает запись фильма в базе данных

---

## Детальная страница фильма
- Путь к front: index/movie_details.php
- Путь к controller: index/movie_details_controller.php

#### front
- ~~Контейнер с фильмом (Картинка 250x400 слева, название описание длительность время показа справа, название оцентровано, описание держиться к левой части, длительность и время показа справого краю)~~
- ~~Кнопка удалить внутри контейнера под всем текстом (только для админов)~~
- Под контейнером (уже не в нем), отобразить таблицу чекбоксов (таблица без border), таблица размером max_rows и max_seats из movie. Чекбоксы активные если место занято (из данных getSeatsByMovie). При нажатии на уже "занятый" чекбокс выводиться alert (место уже занято). Если происходит нажатие на не активный чекбокс, то мы сначала проверяем не просрочен ли фильм, затем проверяем еще раз занято ли место (isSeatReserved) и если не занято, то "бронируем" на пользователя место (reserveSeat), выводим alert об успехе и переводим пользователя на главный экран. Пользователь который уже имеет место на данный фильм (isUserHasSeat) не может зарезервировать место на еще один фильм.

#### back
1. ~~страница зависит от ?movie_id=~~
2. происходит интервальное (5 сек ) обновление мест и фильма AJAX
3. валидация в controller места и ряда (> 0 и <= чем max_rows и max_seats)
4. ~~Валидация доступа к фильму, если фильм просрочен то выводить alert и переводить на главную страницу~~

#### db
1. getMovie($movieId) возращает все данные о фильме
2. getSeatsByMovie($movidId) возращает все данные о местах связанных с фильмом
3. isUserHasSeat($userId) возращает bool в зависимости от того, занял ли человек уже место на этот фильм
4. isSeatReserved($seatId) возращает bool в зависимости от того, занято ли место
5. reserveSeat($seatId, $userId, $rowNumber, $seatNumber) создает место и привязывает его к пользователю
6. deleteMovie($movieId) удаляет запись о фильме

---

## Личный кабинет
- Путь к front: user/profile.php
- Путь к controller: user/profile_controller.php

#### front
- Заголовочный текст "Личный кабине пользователя NAME"
- Заголовочный текст "Ваши бронирования"
- Если бронирований (мест) нету вообще выводить красный контейнер с текстом (У вас ни одного бронирования)
- Если места есть то выводить их так (максимум 3 карточки в одном ряду):
    1. Весь фильм расположен в карточке
    2. Сверху изображение fill (50х80), под изображением информация (название, длительность, время показа), под информацией вывести занятое место (ряд и место)

#### back
1. Интервальное обновление (5 сек) бронирований (мест) привязанных на пользователя AJAX

#### db
1. getUserSeats($userId) возращает все занятые места пользователем + присоединяет к этим даннным фильм (к которому привязано место)
